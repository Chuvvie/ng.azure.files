!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){!function(){"use strict";var t=r(1),n=r(2);angular.module("ng.azure.files",[]).service("uploadService",t).service("downloadService",n).directive("browseFile",function(){return{scope:{fileListCallback:"&"},link:function(e,t,r){t.bind("change",function(t){var r=[],n=t.target.files;if(n.length>0)for(var o=0;o<n.length;o++)r.push(n[o]);e.fileListCallback({files:r})})}}}).directive("dropFile",function(){return{scope:{fileListCallback:"&"},link:function(e,t,r){t.bind("dragover",function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}),t.bind("drop",function(t){t.stopPropagation(),t.preventDefault();var r=[],n=t.dataTransfer?t.dataTransfer.files:t.target.files;if(n.length>0)for(var o=0;o<n.length;o++)r.push(n[o]);e.fileListCallback({files:r})})}}}),e.exports="ng.azure.files"}()},function(e,t){!function(){"use strict";function t(e){var t=function(e){var t=256e4,r=e.file,n=r.size;return n<256e4&&(t=n),{maxBlockSize:t,numberOfBlocks:n%t==0?n/t:parseInt(n/t,10)+1,totalBytesRemaining:n,currentFilePointer:0,blockIds:new Array,blockIdPrefix:"block-",bytesUploaded:0,submitUri:null,file:r,fileUrl:e.sasUrl,progress:e.progress,complete:e.complete,error:e.error,cancelled:!1}},r=function(e,t){if(!t.cancelled)if(t.totalBytesRemaining>0){var r=t.file.slice(t.currentFilePointer,t.currentFilePointer+t.maxBlockSize),i=t.blockIdPrefix+o(t.blockIds.length,6);t.blockIds.push(btoa(i)),e.readAsArrayBuffer(r),t.currentFilePointer+=t.maxBlockSize,t.totalBytesRemaining-=t.maxBlockSize,t.totalBytesRemaining<t.maxBlockSize&&(t.maxBlockSize=t.totalBytesRemaining)}else n(t)},n=function(t){for(var r=t.fileUrl+"&comp=blocklist",n='<?xml version="1.0" encoding="utf-8"?><BlockList>',o=0;o<t.blockIds.length;o++)n+="<Latest>"+t.blockIds[o]+"</Latest>";n+="</BlockList>",e.put(r,n,{headers:{"x-ms-blob-content-type":t.file.type},requestComingFromUploaderService:!0}).then(function(e){t.complete&&t.complete(e.data,e.status,e.headers,e.config)},function(e){t.error&&t.error(e.data,e.status,e.headers,e.config)})},o=function(e,t){for(var r=""+e;r.length<t;)r="0"+r;return r};return{upload:function(n){var o=t(n),i=new FileReader;return i.onloadend=function(t){if(t.target.readyState===FileReader.DONE&&!o.cancelled){var n=o.fileUrl+"&comp=block&blockid="+o.blockIds[o.blockIds.length-1],a=new Uint8Array(t.target.result);e.put(n,a,{headers:{"x-ms-blob-type":"BlockBlob","Content-Type":o.file.type},requestComingFromUploaderService:!0,transformRequest:[]}).then(function(e){if(!o.cancelled){o.bytesUploaded+=a.length;var t=(parseFloat(o.bytesUploaded)/parseFloat(o.file.size)*100).toFixed(2);o.progress&&o.progress(t,e.data,e.status,e.headers,e.config),r(i,o)}},function(e){o.error&&o.error(e.data,e.status,e.headers,e.config)})}},r(i,o),{cancel:function(){o.cancelled=!0}}}}}t.$inject=["$http"],e.exports=t}()},function(e,t){!function(){"use strict";function t(e,t){var r=e.defer();return{downloadAsFile:function(e){return t.get(e.sasUrl,{cache:!1,responseType:"arraybuffer",eventHandlers:{progress:function(t){e.progress(t.loaded/t.total*100)}},headers:{"Content-Type":"application/octet-stream; charset=utf-8"},requestComingFromUploaderService:!0}).then(function(t){var n=t.headers["content-type"]||"application/octet-stream",o=new Blob([t.data],{type:n});FileSaver.saveAs(o,e.filename),r.resolve()},function(e){r.reject(e)}),r.promise}}}t.$inject=["$q","$http"],e.exports=t}()}]);